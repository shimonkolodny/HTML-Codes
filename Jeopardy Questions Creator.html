<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jeopardy Question Creator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f9f9f9; }
    .container { max-width: 600px; margin: 20px auto; padding: 20px; background: #fff; border-radius: 8px; }
    h1 { margin-bottom: 0.5em; }
    label { display: block; margin-top: 10px; }
    input, select, button { margin-top: 5px; padding: 8px; width: 100%; box-sizing: border-box; }
    .actions { margin: 20px 0; display: flex; gap: 10px; }
    .question-item { margin-top: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
    .delete-btn { background-color: red; color: white; margin-top: 5px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Jeopardy Question Creator</h1>
    <div class="actions">
      <button onclick="importFromGitHub()">Import Questions</button>
      <button onclick="saveToGitHub()">Save Questions</button>
      <button onclick="eraseAllQuestions()">Delete All Questions</button>
    </div>
    <form onsubmit="addQuestion(event)">
      <label>Question:</label>
      <input type="text" id="question" required>
      <label>Option 1:</label>
      <input type="text" id="opt1" required>
      <label>Option 2:</label>
      <input type="text" id="opt2" required>
      <label>Option 3:</label>
      <input type="text" id="opt3" required>
      <label>Option 4:</label>
      <input type="text" id="opt4" required>
      <label>Correct Index (0-3):</label>
      <input type="number" id="correctIndex" min="0" max="3" required>
      <label>Value:</label>
      <input type="number" id="value" min="100" max="500" step="100" required>
      <button type="submit">Add Question</button>
    </form>
    <div id="questions-list"></div>
  </div>
  <script src="script.js"></script>
  <script>
    let questions = [];
    let lastDataSha = null;

    async function importFromGitHub() {
      const data = await fetchFromGitHub();
      if (data) {
        questions = data.questions || [];
        saveToLocal();
        displayQuestions();
        alert('Imported questions from GitHub.');
      }
    }

    function addQuestion(event) {
      event.preventDefault();
      const newQuestion = {
        question: document.getElementById('question').value,
        options: [
          document.getElementById('opt1').value,
          document.getElementById('opt2').value,
          document.getElementById('opt3').value,
          document.getElementById('opt4').value,
        ],
        correctIndex: parseInt(document.getElementById('correctIndex').value),
        value: parseInt(document.getElementById('value').value)
      };
      questions.push(newQuestion);
      saveToLocal();
      displayQuestions();
    }

    function displayQuestions() {
      const container = document.getElementById('questions-list');
      container.innerHTML = '';
      questions.forEach((q, i) => {
        const div = document.createElement('div');
        div.classList.add('question-item');
        div.innerHTML = `<strong>${q.question}</strong><br>Value: ${q.value}`;
        const deleteBtn = document.createElement('button');
        deleteBtn.innerText = 'Delete';
        deleteBtn.classList.add('delete-btn');
        deleteBtn.onclick = () => deleteQuestion(i);
        div.appendChild(deleteBtn);
        container.appendChild(div);
      });
    }

    function deleteQuestion(index) {
      questions.splice(index, 1);
      saveToLocal();
      displayQuestions();
    }

    function eraseAllQuestions() {
      if (confirm('Are you sure you want to delete all questions?')) {
        questions = [];
        saveToLocal();
        displayQuestions();
      }
    }

    async function saveToGitHub() {
      await updateGitHubData({ questions });
      alert('Questions saved to GitHub.');
    }

    function saveToLocal() {
      localStorage.setItem('jeopardyQuestions', JSON.stringify(questions));
    }

    function loadFromLocal() {
      const data = localStorage.getItem('jeopardyQuestions');
      if (data) questions = JSON.parse(data);
      displayQuestions();
    }

    window.onload = loadFromLocal;
  </script>
</body>
</html>
