<!DOCTYPE html>
<html>
<head>
    <title>Encryption/Decryption Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        textarea {
            width: 80%;
            padding: 10px;
            font-size: 16px;
        }
        button {
            padding: 10px 15px;
            margin-right: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>Encryption/Decryption Tool</h1>
    <textarea id="inputText" rows="6" placeholder="Enter your message here"></textarea><br><br>
    <button id="encryptButton">Encrypt</button>
    <button id="decryptButton">Decrypt</button>
    <button id="exposedButton">Exposed</button><br><br>
    <textarea id="outputText" rows="6" placeholder="Output will appear here"></textarea>

    <script>
        // Character to Code mapping
        var charToCode = {
            'A': '😊', 'B': '😂', 'C': '🤣', 'D': '💖',
            'E': '🎁', 'F': '🤦‍', 'G': '🤢', 'H': '(●◡●)',
            'I': '🧓', 'J': '🧒', 'K': '🍕', 'L': '🥚',
            'M': '🍭', 'N': '🥓', 'O': '🍋', 'P': '🍌',
            'Q': '🍻', 'R': '🥯', 'S': '🥤', 'T': '🥜',
            'U': '🧄', 'V': '🥒', 'W': '🚲', 'X': '🚖',
            'Y': '🏁', 'Z': '🚦',
            'a': '☮', 'b': '☢', 'c': '💥', 'd': '🔇',
            'e': '💖', 'f': '🟩', 'g': '💦', 'h': '🎇',
            'i': '🎃', 'j': '🎗', 'k': '😈', 'l': '🐴',
            'm': '😅', 'n': '👩‍👩‍👦', 'o': '🥱', 'p': '😘🥰',
            'q': '👨🏿‍🤝‍👨🏿', 'r': '😐', 's': '😗', 't': '😮',
            'u': '🥱', 'v': '🍱🍱', 'w': '🥓🥓', 'x': '🥨',
            'y': '🍓', 'z': '😭'
        };

        // Ensure unique emojis for each character
        var availableEmojis = [
            '🦄', '🐱', '🐶', '🐸', '🐔', '🦊', '🦁', '🐼', '🐻', '🐹', '🐨', '🐯', '🐴', 
            '🦥', '🐢', '🦎', '🦖', '🐳', '🐬', '🐠', '🐙', '🦑', '🐞', '🐜', '🦋', '🐌', 
            '🐢', '🦖', '🐢', '🦔', '🦜', '🦚', '🦅', '🦆', '🦉', '🦢', '🐧', '🐦'
        ];

        var emojiSet = new Set();
        for (var key in charToCode) {
            var emoji = charToCode[key];
            if (emojiSet.has(emoji)) {
                let newEmoji;
                do {
                    newEmoji = availableEmojis[Math.floor(Math.random() * availableEmojis.length)];
                } while (emojiSet.has(newEmoji));
                charToCode[key] = newEmoji;
            }
            emojiSet.add(charToCode[key]);
        }

        // Generate Reverse mapping for decryption
        var codeToChar = {};
        for (var key in charToCode) {
            codeToChar[charToCode[key]] = key;
        }

        // Encrypt function
        function encrypt(text) {
            var result = '';
            for (var i = 0; i < text.length; i++) {
                var char = text[i];
                if (charToCode[char]) {
                    result += charToCode[char];
                } else {
                    result += char; // Keep any character not in the mapping
                }
            }
            return result;
        }

        // Decrypt function with special case for exposed message
        function decrypt(text) {
            // Special case for the Exposed message
            if (text === '1029486584658974364876') {
                return 'This code was exposed, go to https://1drv.ms/f/c/cddf89ab93639b76/EooqZLBh_9pEnvZ9kmEhiVIBP4EPa4_9Qg3pEU9WySJJAQ?e=iMGEYq for backup code.';
            }

            var result = '';
            var temp = ''; // Temporary string to build emoji sequences

            for (var i = 0; i < text.length; i++) {
                temp += text[i]; // Build emoji sequence one character at a time

                // If temp matches a code, convert it
                if (codeToChar[temp]) {
                    result += codeToChar[temp];
                    temp = ''; // Reset temp after a successful match
                } else if (temp.length > 4) { 
                    // Limit sequence length to avoid unnecessary long checks
                    result += temp[0]; // Add the first character as plaintext
                    temp = temp.slice(1); // Trim the first character from temp
                }
            }

            // Add any leftover characters that didn't match to the result
            result += temp;
            return result;
        }

        // Event listeners for buttons
        document.getElementById('encryptButton').addEventListener('click', function() {
            var inputText = document.getElementById('inputText').value;
            var outputText = encrypt(inputText);
            document.getElementById('outputText').value = outputText;
        });

        document.getElementById('decryptButton').addEventListener('click', function() {
            var inputText = document.getElementById('inputText').value;
            var outputText = decrypt(inputText);
            document.getElementById('outputText').value = outputText;
        });

        document.getElementById('exposedButton').addEventListener('click', function() {
            var outputText = '1029486584658974364876';
            document.getElementById('outputText').value = outputText;
        });
    </script>
</body>
</html>
